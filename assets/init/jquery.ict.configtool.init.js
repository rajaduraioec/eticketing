
/* =============
 * @author	Increatech Dev Team
 * @copyright	Copyright (c) 2013 - 2017, Increatech Business Solution Pvt Ltd, India (http://increatech.com/)
 * @link	https://increatech.com
============= */
jQuery(document).ajaxStart(function() { Pace.restart(); });jQuery(document).ready(function($){$('#depot').on('change',function(){var depotID = $(this).val();if(depotID){$.ajax({type:'POST',url:baseurl+'configtool/fetchdevice',data:'depot='+depotID,success:function(html){$('#device').html(html);$('#driver').html('<option value="">Select Device First</option>'); $('#conductor').html('<option value="">Select Device First</option>'); $('#route').html('<option value="">Select Device First</option>'); $('#bus').html('<option value="">Select Device First</option>'); }}); }else{$('#device').html('<option value="">Select Depot first</option>'); $('#driver').html('<option value="">Select Device First</option>'); $('#conductor').html('<option value="">Select Device First</option>'); $('#route').html('<option value="">Select Device First</option>'); $('#bus').html('<option value="">Select Device First</option>'); }});$('#device').on('change',function(){var deviceID = $(this).val();if(deviceID){$.ajax({type:'POST',url:baseurl+'configtool/fetchconfig',data:{device :deviceID},dataType: "JSON",success:function(data){$('#driver').html(data.driver); $('#conductor').html(data.conductor); $('#route').html(data.route); $('#bus').html(data.bus); }}); }else{$('#driver').html('<option value="">Select Device First</option>'); $('#conductor').html('<option value="">Select Device First</option>'); $('#route').html('<option value="">Select Device First</option>'); $('#bus').html('<option value="">Select Device First</option>'); }});});function configvalidateme(url,formid){var formvalid;jQuery(function ($) {$('#'+formid).validate();$("#config-submit").prop("disabled",true);formvalid=$('#'+formid).valid();});if(formvalid){ajaxconfigpost(url);}else{jQuery(function ($) { $("#config-submit").prop("disabled",false);});}}function ajaxconfigpost(url){jQuery.ajax({url : url ,type: "POST",data: jQuery('#config-form').serialize(),dataType: "JSON",success: function(response){if(response.status){$.toast({heading: 'Well done!',text: response.message,position: 'top-right',loaderBg: '#5ba035',icon: 'success',hideAfter: 3000,stack: 1});$("#config-submit").prop("disabled",false);}else{ $.toast({text: response.message,position: 'top-right',loaderBg: '#bf441d',icon: 'error',hideAfter: 3000,stack: 1});}}});}